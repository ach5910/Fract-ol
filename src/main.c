/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   main.c                                             :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: ahunt <marvin@42.fr>                       +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2016/12/03 20:47:44 by ahunt             #+#    #+#             */
/*   Updated: 2016/12/06 14:43:58 by ahunt            ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "fractol.h"
#include <stdio.h>

int unicore_queef[256]={
	0xff0000, 0xfd0004, 0xfb0108, 0xf8010c, 
	0xf50210, 0xf30214, 0xf00218, 0xee031c, 
	0xeb0320, 0xe80424, 0xe60428, 0xe3042c, 
	0xe10530, 0xde0534, 0xdb0638, 0xd9063c, 
	0xd60640, 0xd30744, 0xd10748, 0xce084c, 
	0xcc0850, 0xc90854, 0xc60958, 0xc4095c, 
	0xc10a60, 0xbf0a64, 0xbc0a68, 0xb90b6c, 
	0xb70b70, 0xb40c74, 0xb20c78, 0xaf0c7c, 
	0xac0d80, 0xaa0d84, 0xa70e88, 0xa50e8c, 
	0xa20e90, 0x9f0f94, 0x9d0f98, 0x9a109c, 
	0x9810a0, 0x9510a4, 0x9211a9, 0x9011ad, 
	0x8d12b1, 0x8b12b5, 0x8812b9, 0x8513bd, 
	0x8313c1, 0x8014c5, 0x7d14c9, 0x7b14cd, 
	0x7815d1, 0x7615d5, 0x7316d9, 0x7016dd, 
	0x6e16e1, 0x6b17e5, 0x6917e9, 0x6618ed, 
	0x6318f1, 0x6118f5, 0x5e19f9, 0x5c19fd, 
	0x5a1aff, 0x5d1efd, 0x6022fb, 0x6225fa, 
	0x6529f8, 0x672cf6, 0x6a30f4, 0x6d34f2, 
	0x6f37f0, 0x723bee, 0x743fec, 0x7742ea, 
	0x7a46e8, 0x7c49e6, 0x7f4de4, 0x8151e2, 
	0x8454e0, 0x8758df, 0x895bdd, 0x8c5fdb, 
	0x8e63d9, 0x9166d7, 0x946ad5, 0x966dd3, 
	0x9971d1, 0x9b75cf, 0x9e78cd, 0xa17ccb, 
	0xa380c9, 0xa683c7, 0xa887c5, 0xab8ac4, 
	0xae8ec2, 0xb092c0, 0xb395be, 0xb599bc, 
	0xb89cba, 0xbba0b8, 0xbda4b6, 0xc0a7b4, 
	0xc3abb2, 0xc5aeb0, 0xc8b2ae, 0xcab6ac, 
	0xcdb9aa, 0xd0bda9, 0xd2c1a7, 0xd5c4a5, 
	0xd7c8a3, 0xdacba1, 0xddcf9f, 0xdfd39d, 
	0xe2d69b, 0xe4da99, 0xe7dd97, 0xeae195, 
	0xece593, 0xefe891, 0xf1ec90, 0xf4f08e, 
	0xf7f38c, 0xf9f78a, 0xfcfa88, 0xfefe86, 
	0xfffe84, 0xfffa84, 0xfff683, 0xfff282, 
	0xffee81, 0xffeb80, 0xffe77f, 0xffe37f, 
	0xffdf7e, 0xffdb7d, 0xffd77c, 0xffd47b, 
	0xffd07a, 0xffcc79, 0xffc879, 0xffc478, 
	0xffc077, 0xffbd76, 0xffb975, 0xffb574, 
	0xffb174, 0xffad73, 0xffa972, 0xffa571, 
	0xffa270, 0xff9e6f, 0xff9a6e, 0xff966e, 
	0xff926d, 0xff8e6c, 0xff8b6b, 0xff876a, 
	0xff8369, 0xff7f68, 0xff7b68, 0xff7767, 
	0xff7466, 0xff7065, 0xff6c64, 0xff6863, 
	0xff6463, 0xff6062, 0xff5c61, 0xff5960, 
	0xff555f, 0xff515e, 0xff4d5d, 0xff495d, 
	0xff455c, 0xff425b, 0xff3e5a, 0xff3a59, 
	0xff3658, 0xff3258, 0xff2e57, 0xff2b56, 
	0xff2755, 0xff2354, 0xff1f53, 0xff1b52, 
	0xff1752, 0xff1351, 0xff1050, 0xff0c4f, 
	0xfd0e51, 0xf91254, 0xf61556, 0xf21959, 
	0xee1d5c, 0xea215f, 0xe72562, 0xe32964, 
	0xdf2c67, 0xdb306a, 0xd8346d, 0xd4386f, 
	0xd03c72, 0xcd4075, 0xc94378, 0xc5477b, 
	0xc14b7d, 0xbe4f80, 0xba5383, 0xb65786, 
	0xb35b88, 0xaf5e8b, 0xab628e, 0xa76691, 
	0xa46a94, 0xa06e96, 0x9c7299, 0x99759c, 
	0x95799f, 0x917da1, 0x8d81a4, 0x8a85a7, 
	0x8689aa, 0x828dad, 0x7e90af, 0x7b94b2, 
	0x7798b5, 0x739cb8, 0x70a0ba, 0x6ca4bd, 
	0x68a7c0, 0x64abc3, 0x61afc5, 0x5db3c8, 
	0x59b7cb, 0x56bbce, 0x52bed1, 0x4ec2d3, 
	0x4ac6d6, 0x47cad9, 0x43cedc, 0x3fd2de, 
	0x3bd6e1, 0x38d9e4, 0x34dde7, 0x30e1ea, 
	0x2de5ec, 0x29e9ef, 0x25edf2, 0x21f0f5, 
	0x1ef4f7, 0x1af8fa, 0x16fcfd, 0x13ffff};

int dusk[256] ={
	0xffffff, 0xfffdff, 0xfffbff, 0xfff9ff, 
	0xfff7ff, 0xfff5ff, 0xfff3ff, 0xfff1ff, 
	0xffefff, 0xffedff, 0xffebff, 0xffe9ff, 
	0xffe7ff, 0xffe5ff, 0xffe3ff, 0xffe1ff, 
	0xffdfff, 0xffddff, 0xffdbff, 0xffd9ff, 
	0xffd7ff, 0xffd5ff, 0xffd3ff, 0xffd1ff, 
	0xffcfff, 0xffcdff, 0xffcbff, 0xffc9ff, 
	0xffc7ff, 0xffc5ff, 0xffc3ff, 0xffc1ff, 
	0xffbfff, 0xffbdff, 0xffbbff, 0xffb9ff, 
	0xffb7ff, 0xffb5ff, 0xffb3ff, 0xffb1ff, 
	0xffafff, 0xffadff, 0xffacff, 0xffaaff, 
	0xffa8ff, 0xffa6ff, 0xffa4ff, 0xffa2ff, 
	0xffa0ff, 0xff9eff, 0xff9cff, 0xff9aff, 
	0xff98ff, 0xff96ff, 0xff94ff, 0xff92ff, 
	0xff90ff, 0xff8eff, 0xff8cff, 0xff8aff, 
	0xff88ff, 0xff86ff, 0xff84ff, 0xff82ff, 
	0xff80ff, 0xfd7eff, 0xfb7cff, 0xf97aff, 
	0xf778ff, 0xf576ff, 0xf274ff, 0xf172ff, 
	0xee70ff, 0xed6eff, 0xeb6cff, 0xe96aff, 
	0xe768ff, 0xe566ff, 0xe364ff, 0xe162ff, 
	0xdf60ff, 0xdd5eff, 0xdb5cff, 0xd95aff, 
	0xd758ff, 0xd556ff, 0xd354ff, 0xd151ff, 
	0xcf4fff, 0xcd4dff, 0xcb4bff, 0xc949ff, 
	0xc747ff, 0xc545ff, 0xc343ff, 0xc141ff, 
	0xbf3fff, 0xbd3dff, 0xbb3bff, 0xb939ff, 
	0xb737ff, 0xb535ff, 0xb333ff, 0xb131ff, 
	0xaf2fff, 0xad2dff, 0xab2bff, 0xa929ff, 
	0xa727ff, 0xa525ff, 0xa323ff, 0xa121ff, 
	0x9f1fff, 0x9d1dff, 0x9b1bff, 0x9919ff, 
	0x9717ff, 0x9515ff, 0x9313ff, 0x9111ff, 
	0x8f0fff, 0x8d0dff, 0x8a0bff, 0x8809ff, 
	0x8607ff, 0x8405ff, 0x8303ff, 0x8101ff, 
	0x7e00fe, 0x7d00fc, 0x7a00fa, 0x7900f8, 
	0x7600f6, 0x7400f4, 0x7300f2, 0x7100f0, 
	0x6f00ee, 0x6d00ec, 0x6b00ea, 0x6900e8, 
	0x6600e6, 0x6400e4, 0x6200e3, 0x6100e1, 
	0x5e00df, 0x5d00dd, 0x5b00db, 0x5900d9, 
	0x5700d7, 0x5400d5, 0x5300d3, 0x5100d1, 
	0x4f00cf, 0x4d00cd, 0x4b00cb, 0x4900c9, 
	0x4600c7, 0x4400c5, 0x4200c3, 0x4000c1, 
	0x3f00bf, 0x3d00bd, 0x3b00bb, 0x3900b9, 
	0x3600b7, 0x3400b5, 0x3300b3, 0x3100b1, 
	0x2f00af, 0x2c00ae, 0x2a00ac, 0x2800aa, 
	0x2700a8, 0x2500a6, 0x2200a4, 0x2100a2, 
	0x1f00a0, 0x1d009e, 0x1b009c, 0x19009a, 
	0x160098, 0x140096, 0x120094, 0x110092, 
	0xe0090, 0xd008e, 0xb008c, 0x9008a, 
	0x60088, 0x40086, 0x20084, 0x82, 
	0x80, 0x7e, 0x7c, 0x7a, 
	0x78, 0x76, 0x74, 0x72, 
	0x70, 0x6e, 0x6c, 0x6a, 
	0x68, 0x66, 0x64, 0x62, 
	0x60, 0x5e, 0x5c, 0x5a, 
	0x58, 0x56, 0x53, 0x51, 
	0x4f, 0x4d, 0x4b, 0x49, 
	0x47, 0x45, 0x43, 0x41, 
	0x3f, 0x3d, 0x3b, 0x39, 
	0x37, 0x35, 0x33, 0x31, 
	0x2f, 0x2d, 0x2b, 0x29, 
	0x27, 0x25, 0x23, 0x21, 
	0x1f, 0x1d, 0x1a, 0x18, 
	0x16, 0x14, 0x12, 0x10, 
	0xe, 0xc, 0xa, 0x8, 
	0x6, 0x4, 0x2, 0};

int dawn[256] ={
	0xffffc3, 0xffffc2, 0xffffc1, 0xffffbf, 
	0xffffbe, 0xffffbd, 0xffffbc, 0xffffbb, 
	0xffffba, 0xffffb9, 0xffffb8, 0xffffb7, 
	0xffffb6, 0xffffb5, 0xffffb3, 0xffffb2, 
	0xffffb1, 0xffffb0, 0xffffaf, 0xffffae, 
	0xffffad, 0xffffac, 0xffffab, 0xffffaa, 
	0xffffa9, 0xffffa7, 0xffffa6, 0xffffa5, 
	0xffffa4, 0xffffa3, 0xffffa2, 0xffffa1, 
	0xffffa0, 0xffff9f, 0xffff9e, 0xffff9d, 
	0xffff9b, 0xffff9a, 0xffff99, 0xffff98, 
	0xffff97, 0xffff96, 0xffff95, 0xffff94, 
	0xffff93, 0xffff92, 0xffff91, 0xffff8f, 
	0xffff8e, 0xffff8d, 0xffff8c, 0xffff8b, 
	0xffff8a, 0xffff89, 0xffff88, 0xffff87, 
	0xffff86, 0xffff85, 0xffff83, 0xffff82, 
	0xffff81, 0xffff80, 0xffff7f, 0xffff7e, 
	0xffff7d, 0xfffd7d, 0xfffb7d, 0xfff97d, 
	0xfff77d, 0xfff57d, 0xfff27d, 0xfff17d, 
	0xffee7d, 0xffed7d, 0xffeb7d, 0xffe97d, 
	0xffe77d, 0xffe57e, 0xffe37e, 0xffe17e, 
	0xffdf7e, 0xffdd7e, 0xffdb7e, 0xffd97e, 
	0xffd77e, 0xffd57e, 0xffd37e, 0xffd17e, 
	0xffcf7e, 0xffcd7e, 0xffcb7e, 0xffc97e, 
	0xffc77e, 0xffc57e, 0xffc37e, 0xffc17e, 
	0xffbf7e, 0xffbd7e, 0xffbb7e, 0xffb97e, 
	0xffb77e, 0xffb57e, 0xffb37e, 0xffb17e, 
	0xffaf7e, 0xffad7e, 0xffab7e, 0xffa97e, 
	0xffa77e, 0xffa57e, 0xffa37e, 0xffa17e, 
	0xff9f7e, 0xff9d7e, 0xff9b7e, 0xff997e, 
	0xff977e, 0xff957e, 0xff937e, 0xff917f, 
	0xff8f7f, 0xff8d7f, 0xff8a7f, 0xff887f, 
	0xff867f, 0xff847f, 0xff837f, 0xff817f, 
	0xfe7e7f, 0xfc7d7f, 0xfa7a7f, 0xf8797f, 
	0xf6767f, 0xf4747f, 0xf2737f, 0xf0717f, 
	0xee6f7f, 0xec6d7f, 0xea6b7f, 0xe8697f, 
	0xe6667f, 0xe4647f, 0xe2627f, 0xe0617f, 
	0xde5e7f, 0xdc5d7f, 0xda5b7f, 0xd8597f, 
	0xd6577f, 0xd4547f, 0xd2537f, 0xd0517f, 
	0xce4f7f, 0xcc4d7f, 0xca4b7f, 0xc8497f, 
	0xc6467f, 0xc4447f, 0xc2427f, 0xc0407f, 
	0xbe3f7f, 0xbc3d7f, 0xba3b7f, 0xb8397f, 
	0xb6367f, 0xb4347f, 0xb2337f, 0xb0317f, 
	0xae2f7f, 0xab2c7f, 0xa92a7f, 0xa7287f, 
	0xa5277f, 0xa3257f, 0xa1227f, 0x9f217f, 
	0x9d1f7f, 0x9b1d7f, 0x991b7f, 0x97197f, 
	0x95167f, 0x93147f, 0x91127f, 0x8f117f, 
	0x8d0e7f, 0x8b0d7f, 0x890b7f, 0x87097f, 
	0x85067f, 0x83047f, 0x81027f, 0x7f007f, 
	0x7d007f, 0x7b007f, 0x79007f, 0x77007f, 
	0x75007f, 0x73007f, 0x71007f, 0x6f007f, 
	0x6d007f, 0x6b007f, 0x69007f, 0x67007f, 
	0x65007f, 0x63007f, 0x61007f, 0x5f007f, 
	0x5d007f, 0x5b007f, 0x59007f, 0x57007e, 
	0x55007e, 0x53007e, 0x52007e, 0x50007e, 
	0x4e007e, 0x4c007e, 0x4a007e, 0x48007e, 
	0x46007e, 0x44007e, 0x42007e, 0x40007e, 
	0x3e007e, 0x3c007e, 0x3a007e, 0x38007e, 
	0x36007e, 0x34007e, 0x32007e, 0x30007e, 
	0x2e007e, 0x2c007e, 0x2a007e, 0x28007e, 
	0x26007e, 0x24007e, 0x22007e, 0x20007e, 
	0x1e007e, 0x1c007e, 0x1a007e, 0x18007e, 
	0x16007e, 0x14007e, 0x12007e, 0x10007e, 
	0xe007e, 0xc007e, 0xa007e, 0x8007e, 
	0x6007e, 0x4007e, 0x2007e, 0x7e};

int red_blue[256] ={
	0x5f0000, 0x610000, 0x620000, 0x640000, 
	0x650000, 0x670000, 0x680000, 0x6a0000, 
	0x6b0000, 0x6d0000, 0x6e0000, 0x700000, 
	0x720000, 0x730000, 0x750000, 0x760000, 
	0x780000, 0x790000, 0x7b0000, 0x7c0000, 
	0x7e0000, 0x7f0000, 0x810000, 0x820000, 
	0x840000, 0x860000, 0x870000, 0x890000, 
	0x8a0000, 0x8c0000, 0x8d0000, 0x8f0000, 
	0x900000, 0x920000, 0x930000, 0x950000, 
	0x960000, 0x980000, 0x9a0000, 0x9b0000, 
	0x9d0000, 0x9e0000, 0xa00000, 0xa10000, 
	0xa30000, 0xa40000, 0xa60000, 0xa70000, 
	0xa90000, 0xaa0000, 0xac0000, 0xae0000, 
	0xaf0000, 0xb10000, 0xb20000, 0xb40000, 
	0xb50000, 0xb70000, 0xb80000, 0xba0000, 
	0xbb0000, 0xbd0000, 0xbe0000, 0xc00000, 
	0xc10101, 0xc20505, 0xc30909, 0xc40d0d, 
	0xc51111, 0xc61515, 0xc71919, 0xc81d1d, 
	0xc92121, 0xca2525, 0xcb2929, 0xcc2d2d, 
	0xcd3131, 0xce3535, 0xcf3939, 0xd03d3d, 
	0xd14141, 0xd24545, 0xd34949, 0xd44d4d, 
	0xd55151, 0xd65555, 0xd75959, 0xd85d5d, 
	0xd96161, 0xda6565, 0xdb6969, 0xdc6d6d, 
	0xdd7171, 0xde7575, 0xdf7979, 0xdf7d7d, 
	0xe08181, 0xe18585, 0xe28989, 0xe38d8d, 
	0xe49191, 0xe59595, 0xe69999, 0xe79d9d, 
	0xe8a1a1, 0xe9a5a5, 0xeaa9a9, 0xebadad, 
	0xecb1b1, 0xedb5b5, 0xeeb9b9, 0xefbdbd, 
	0xf0c1c1, 0xf1c5c5, 0xf2c9c9, 0xf3cdcd, 
	0xf4d1d1, 0xf5d5d5, 0xf6d9d9, 0xf7dddd, 
	0xf8e1e1, 0xf9e5e5, 0xfae9e9, 0xfbeded, 
	0xfcf1f1, 0xfdf5f5, 0xfef9f9, 0xfffdfd, 
	0xfdfdff, 0xf9f9fe, 0xf5f5fd, 0xf1f1fc, 
	0xededfb, 0xe9e9fa, 0xe5e5f9, 0xe1e1f8, 
	0xddddf7, 0xd9d9f6, 0xd5d5f5, 0xd1d1f4, 
	0xcdcdf3, 0xc9c9f2, 0xc5c5f1, 0xc1c1f0, 
	0xbdbdef, 0xb9b9ee, 0xb5b5ee, 0xb1b1ed, 
	0xadadec, 0xa9a9eb, 0xa5a5ea, 0xa1a1e9, 
	0x9d9de8, 0x9999e7, 0x9595e6, 0x9191e5, 
	0x8d8de4, 0x8989e3, 0x8585e2, 0x8181e1, 
	0x7d7de0, 0x7979df, 0x7575de, 0x7171dd, 
	0x6d6ddc, 0x6969dc, 0x6565db, 0x6161da, 
	0x5d5dd9, 0x5959d8, 0x5555d7, 0x5151d6, 
	0x4d4dd5, 0x4949d4, 0x4545d3, 0x4141d2, 
	0x3d3dd1, 0x3939d0, 0x3535cf, 0x3131ce, 
	0x2d2dcd, 0x2929cc, 0x2525cb, 0x2121cb, 
	0x1d1dca, 0x1919c9, 0x1515c8, 0x1111c7, 
	0xd0dc6, 0x909c5, 0x505c4, 0x101c3, 
	0xc2, 0xc0, 0xbe, 0xbd, 
	0xbb, 0xba, 0xb8, 0xb7, 
	0xb5, 0xb3, 0xb2, 0xb0, 
	0xaf, 0xad, 0xac, 0xaa, 
	0xa9, 0xa7, 0xa5, 0xa4, 
	0xa2, 0xa1, 0x9f, 0x9e, 
	0x9c, 0x9a, 0x99, 0x97, 
	0x96, 0x94, 0x93, 0x91, 
	0x90, 0x8e, 0x8c, 0x8b, 
	0x89, 0x88, 0x86, 0x85, 
	0x83, 0x81, 0x80, 0x7e, 
	0x7d, 0x7b, 0x7a, 0x78, 
	0x77, 0x75, 0x73, 0x72, 
	0x70, 0x6f, 0x6d, 0x6c, 
	0x6a, 0x68, 0x67, 0x65, 
	0x64, 0x62, 0x61, 0x5f,};

int fire[64]={
	0xffff80, 0xfffb7c, 0xfff778, 0xfff274, 
	0xffee70, 0xffeb6c, 0xffe768, 0xffe364, 
	0xffdf60, 0xffdb5c, 0xffd758, 0xffd354, 
	0xffcf4f, 0xffcb4b, 0xffc747, 0xffc343, 
	0xffbf3f, 0xffbb3b, 0xffb737, 0xffb333, 
	0xffaf2f, 0xffab2b, 0xffa727, 0xffa323, 
	0xff9f1f, 0xff9b1b, 0xff9717, 0xff9313, 
	0xff8f0f, 0xff8a0b, 0xff8607, 0xff8303, 
	0xfe7e00, 0xfa7a00, 0xf67600, 0xf27300, 
	0xee6f00, 0xea6b00, 0xe66600, 0xe36200, 
	0xdf5e00, 0xdb5b00, 0xd75700, 0xd35300, 
	0xcf4f00, 0xcb4b00, 0xc74600, 0xc34200, 
	0xbf3f00, 0xbb3b00, 0xb73600, 0xb33300, 
	0xaf2f00, 0xac2a00, 0xa82700, 0xa42200, 
	0xa01f00, 0x9c1b00, 0x981600, 0x941200, 
	0x900e00, 0x8c0b00, 0x880600, 0x840200};

int r_b[64] ={
	0x5f0000, 0x650000, 0x6b0000, 0x720000, 
	0x780000, 0x7e0000, 0x840000, 0x8a0000, 
	0x900000, 0x960000, 0x9d0000, 0xa30000, 
	0xa90000, 0xaf0000, 0xb50000, 0xbb0000, 
	0xc10101, 0xc51111, 0xc92121, 0xcd3131, 
	0xd14141, 0xd55151, 0xd96161, 0xdd7171, 
	0xe08181, 0xe49191, 0xe8a1a1, 0xecb1b1, 
	0xf0c1c1, 0xf4d1d1, 0xf8e1e1, 0xfcf1f1, 
	0xfdfdff, 0xededfb, 0xddddf7, 0xcdcdf3, 
	0xbdbdef, 0xadadec, 0x9d9de8, 0x8d8de4, 
	0x7d7de0, 0x6d6ddc, 0x5d5dd9, 0x4d4dd5, 
	0x3d3dd1, 0x2d2dcd, 0x1d1dca, 0xd0dc6, 
	0xc2, 	  0xbb,     0xb5, 	  0xaf, 
	0xa9, 	  0xa2, 	0x9c, 	  0x96, 
	0x90, 	  0x89, 	0x83, 	  0x7d, 
	0x77, 	  0x70, 	0x6a, 	  0x64};

t_img	*init_image(t_env *e)
{
	t_img *img;

	img = (t_img*)malloc(sizeof(t_img));
	img->i_ptr = mlx_new_image(e->mlx, WIDTH, HEIGHT);
	img->w = WIDTH / 2;
	img->h = HEIGHT / 2;
	img->data = mlx_get_data_addr(img->i_ptr, &img->bpp, &img->size_line, &img->endian);
	
	return (img);
}

t_env	*init_environment(void)
{
	t_env *e;

	e = (t_env*)malloc(sizeof(t_env));
	e->mlx = mlx_init();
	e->win = mlx_new_window(e->mlx, WIDTH, HEIGHT, "Fract'ol");
	e->img = init_image(e);
	e->zoom = 1;
	e->move_x = 0;
	e->move_y = 0;
	e->flags = 0;
	e->scale = 1;
	e->max_iterations = 50;
	return (e);
}

int mandelbrot(t_env *e, float r, float c_a, float c_b)
{
	int n;
	float a;
	float o_a;
	float b;
	float o_b;
	

	
	n = 0;
	a = 0;
	b = 0;
	while (n < e->max_iterations)
	{
		o_a = a * a - b * b;
		o_b = 2 * a * b;
		a = o_a + c_a;
		b = o_b + c_b;
		if (a * a + b * b > 4)
			break ;
		n++;
	}
	return (n);
	
}
void draw(t_env *e)
{
	int i;
	int j;
	int p;
	int ret;
	float c_a;
	float c_b;
	int color;
	float r;

	// e->img->w = WIDTH / 2;
	// e->img->h = HEIGHT / 2;
	// e->img->w *= e->zoom;
	// e->img->h *= e->zoom;
		// char *i_data = e->img->data;
	

	r = sqrt(pow(WIDTH / 2, 2) + pow(HEIGHT / 2, 2));
	j = 0;
	p = 0;
	while (j < HEIGHT)
	{
		i = 0;
		while (i < WIDTH)
		{
			c_a = 2.5  * (i - WIDTH / 2) / (WIDTH / 2 * e->zoom) + e->move_x ;
			c_b = 2.5 * (j - HEIGHT / 2) / (HEIGHT / 2 * e->zoom) + e->move_y ;//(j - e->img->h / 2) / (0.5 * e->img->h )
			if ((ret = mandelbrot(e, r, c_a, c_b)) == e->max_iterations)
				color = 0;
			else
			{
				color = unicore_queef[(int)((ret * 256 / e->max_iterations))];
			}
			// color = sqrt(pow(i - WIDTH / 2, 2) + pow(j - HEIGHT / 2, 2)) * 256 / r;
			// color = dusk[color % 256];
			p = (i * 4) + (j * e->img->size_line);
			e->img->data[p] = color & 0xFF;
			e->img->data[++p] = (color >> 8) & 0xFF;
			e->img->data[++p] = (color >> 16) & 0xFF;
			i++;
		}
		j++;
	}
	// ft_printf(" Bpp %d Size line %d Endian %d Data %d\n", e->img->bpp, e->img->size_line, e->img->endian, ft_atoi(e->img->data));
	//e->img->data = mlx_get_data_addr(e->img->i_ptr, &e->img->bpp, &e->img->size_line, &e->img->endian);
	//count++;
	i = mlx_put_image_to_window(e->mlx, e->win, e->img->i_ptr, 0, 0);
	mlx_destroy_image(e->mlx, e->img->i_ptr);
	e->img->i_ptr = mlx_new_image(e->mlx, WIDTH, HEIGHT);
}

int julia(t_env *e, float c_a, float c_b, float c_re, float c_im)
{
	int n;
	float a;
	float o_a;
	float b;
	float o_b;
	

	
	n = 0;
	a = c_a;
	b = c_b;
	while (n < e->max_iterations)
	{
		o_a = a;
		o_b = b;
		a = o_a * o_a - o_b * o_b + c_re;
		b = 2 * o_a * o_b + c_im;
		if (a * a + b * b > 4)
			break ;
		n++;
	}
	return (n);
	
}
void draw_j(t_env *e, float c_re, float c_im)
{
	int i;
	int j;
	int p;
	int ret;
	float c_a;
	float c_b;
	// float c_im = 0.156;
	// float c_re = -0.8;
	int color;
	float r;

	// e->img->w = WIDTH / 2;
	// e->img->h = HEIGHT / 2;
	// e->img->w *= e->zoom;
	// e->img->h *= e->zoom;
		// char *i_data = e->img->data;
	

	r = sqrt(pow(WIDTH / 2, 2) + pow(HEIGHT / 2, 2));
	j = 0;
	p = 0;
	while (j < HEIGHT)
	{
		i = 0;
		while (i < WIDTH)
		{
			c_a = 2.5 * (i - WIDTH / 2) / (WIDTH / 2 * e->zoom) + e->move_x ;
			c_b = 2.5 * (j - HEIGHT / 2) / (HEIGHT / 2 * e->zoom) + e->move_y ;//(j - e->img->h / 2) / (0.5 * e->img->h )
			if ((ret = julia(e, c_a, c_b, c_re, c_im)) == e->max_iterations)
				color = 0;
			else
			{
				color = unicore_queef[(int)((ret * 256 / e->max_iterations))];
			}
			// color = sqrt(pow(i - WIDTH / 2, 2) + pow(j - HEIGHT / 2, 2)) * 256 / r;
			// color = dusk[color % 256];
			p = (i * 4) + (j * e->img->size_line);
			e->img->data[p] = color & 0xFF;
			e->img->data[++p] = (color >> 8) & 0xFF;
			e->img->data[++p] = (color >> 16) & 0xFF;
			i++;
		}
		j++;
	}
	// ft_printf(" Bpp %d Size line %d Endian %d Data %d\n", e->img->bpp, e->img->size_line, e->img->endian, ft_atoi(e->img->data));
	//e->img->data = mlx_get_data_addr(e->img->i_ptr, &e->img->bpp, &e->img->size_line, &e->img->endian);
	//count++;
	i = mlx_put_image_to_window(e->mlx, e->win, e->img->i_ptr, 0, 0);
	mlx_destroy_image(e->mlx, e->img->i_ptr);
	e->img->i_ptr = mlx_new_image(e->mlx, WIDTH, HEIGHT);
}
int	main(void)
{
	t_env *e;
	e = init_environment();
	draw_j(e, 0, 0);
	my_loop(e);
	return (0);
}
